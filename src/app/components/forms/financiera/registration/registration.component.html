<div id="firstElement" name="firstElement" class="row g-3">
    <div *ngIf="formIndex === 0" class="col-12">
      <div class="card">
        <div class="card-body">
          <div class="row g-3">
            <div class="col-12">
              <h5 class="card-title text-center">Tipo de persona</h5>
            </div>
            <div class="col-12">
              <div class="form-check">
                <input
                  [(ngModel)]="tipoPersona"
                  class="form-check-input"
                  type="radio"
                  name="tipoPersonaNatural"
                  id="tipoPersonaNatural"
                  value="Natural"
                  [ngClass]="{
                    'is-valid': tipoPersona,
                    'is-invalid': !tipoPersona
                  }"
                />
                <label class="form-check-label" for="tipoPersonaNatural">
                  Natural
                </label>
              </div>
              <div class="form-check">
                <input
                  [(ngModel)]="tipoPersona"
                  class="form-check-input"
                  type="radio"
                  name="tipoPersonaJuridica"
                  id="tipoPersonaJuridica"
                  value="Juridica"
                  [ngClass]="{
                    'is-valid': tipoPersona,
                    'is-invalid': !tipoPersona
                  }"
                />
                <label class="form-check-label" for="tipoPersonaJuridica">
                  Juridica
                </label>
                <div class="invalid-feedback">
                  Este campo es (*) obligatorio, seleccione una opcion.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="formIndex === 0" class="col-12">
      <div class="card">
        <div class="card-body">
          <div class="row g-3">
            <div class="col-12">
              <h5 class="card-title text-center">Tipo de relacion</h5>
            </div>
            <div class="col-12">
              <div class="form-check">
                <input
                  [(ngModel)]="tipoRelacion"
                  class="form-check-input"
                  type="radio"
                  name="tipoRelacionContratista"
                  id="tipoRelacionContratista"
                  value="Contratista"
                  [ngClass]="{
                    'is-valid': tipoRelacion,
                    'is-invalid': !tipoRelacion
                  }"
                />
                <label class="form-check-label" for="tipoRelacionContratista"
                  >Contratista</label
                >
              </div>
              <div class="form-check">
                <input
                  [(ngModel)]="tipoRelacion"
                  class="form-check-input"
                  type="radio"
                  name="tipoRelacionProveedor"
                  id="tipoRelacionProveedor"
                  value="Proveedor"
                  [ngClass]="{
                    'is-valid': tipoRelacion,
                    'is-invalid': !tipoRelacion
                  }"
                />
                <label class="form-check-label" for="tipoRelacionProveedor"
                  >Proveedor</label
                >
                <div class="invalid-feedback">
                  Este campo es (*) obligatorio, seleccione una opcion.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="formIndex === 1" class="col-12">
      <div class="card">
        <div class="card-body">
          <div class="row g-3">
            <div class="col-12">
              <h5 class="card-title text-center">Informacion de usuario</h5>
            </div>
            <div *ngIf="tipoPersona === 'Natural'" class="col-12">
              <div class="form-floating">
                <input
                  [(ngModel)]="identification"
                  type="text"
                  class="form-control"
                  name="floatingInputIdentificator"
                  id="floatingInputIdentificator"
                  placeholder="\0"
                  [ngClass]="{
                    'is-valid':
                      identification.length === 8 ||
                      identification.length === 10,
                    'is-invalid':
                      identification.length !== 8 &&
                      identification.length !== 10
                  }"
                  maxlength="10"
                  [OnlyNumbers]="true"
                />
                <label for="floatingInputIdentificator"
                  >Numero de cedula de ciudadania<span class="text-danger"
                    >*</span
                  ></label
                >
                <div class="invalid-feedback">
                  Este campo es (*) obligatorio, rellenelo.
                </div>
              </div>
            </div>
            <div *ngIf="tipoPersona === 'Juridica'" class="col-12">
              <label for="inputNIT1" class="form-label"
                >NIT (Con digito de verificacion) Ej. 890507890-4<span
                  class="text-danger"
                  >*</span
                ></label
              >
              <div class="input-group">
                <input
                  [(ngModel)]="identification"
                  type="text"
                  class="form-control"
                  placeholder="NIT Ej. 890507890"
                  aria-label="NIT Ej. 890507890"
                  [ngClass]="{
                    'is-valid': identification.length === 9,
                    'is-invalid': identification.length !== 9
                  }"
                  style="z-index: 0"
                  name="inputNIT1"
                  maxlength="9"
                  [OnlyNumbers]="true"
                />
                <span class="input-group-text">-</span>
                <input
                  [(ngModel)]="digitoVerificacion"
                  type="text"
                  class="form-control"
                  placeholder="Digito de verificacion Ej. 4"
                  aria-label="Digito de verificacion Ej. 4"
                  [ngClass]="{
                    'is-valid': digitoVerificacion.length === 1,
                    'is-invalid': digitoVerificacion.length !== 1
                  }"
                  style="z-index: 0"
                  name="inputNIT2"
                  maxlength="1"
                  [OnlyNumbers]="true"
                />
                <div class="invalid-feedback">
                  Este campo es (*) obligatorio, rellenelo.
                </div>
              </div>
            </div>
            <div class="col-12">
              <div class="form-floating">
                <input
                  [ngClass]="{
                    'is-valid': validateEmail(email),
                    'is-invalid': !validateEmail(email)
                  }"
                  [(ngModel)]="email"
                  type="email"
                  class="form-control"
                  id="correo"
                  name="correo"
                  placeholder="x"
                />
                <label for="correo"
                  >Correo electronico<span class="text-danger">*</span></label
                >
                <div class="invalid-feedback">
                  Este campo es (*) obligatorio, rellenelo.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="formIndex === 2" class="col-12">
      <div class="card">
        <div class="card-body">
          <div class="row g-3">
            <div class="col-12">
              <h5 class="card-title text-center">
                {{ tipoPersona }} - {{ tipoRelacion }}
              </h5>
            </div>
            <div class="col-12">
              <div class="form-floating">
                <select
                  [(ngModel)]="convenio"
                  class="form-select"
                  id="convenio"
                  name="convenio"
                  [ngClass]="{
                    'is-valid': convenio,
                    'is-invalid': !convenio
                  }"
                >
                  <option selected disabled></option>
                  <option
                    *ngFor="let convenio of convenios"
                    [value]="convenio.Numero"
                  >
                    {{ convenio.Aliado + " | " + convenio.Numero }}
                  </option>
                </select>
                <label for="convenio"
                  >Convenio<span class="text-danger">*</span></label
                >
                <div class="invalid-feedback">
                  Este campo es (*) obligatorio, seleccione una opcion.
                </div>
              </div>
            </div>
            <div class="col-12">
              <div class="form-floating">
                <input
                  [(ngModel)]="nombre"
                  type="text"
                  [ngClass]="{
                    'is-valid': nombre,
                    'is-invalid': !nombre
                  }"
                  class="form-control"
                  name="inputNombre"
                  id="inputNombre"
                  placeholder="\0"
                  maxlength="255"
                />
                <label for="inputNombre"
                  >Nombre o razon social<span class="text-danger">*</span></label
                >
                <div class="invalid-feedback">
                  Este campo es (*) obligatorio, seleccione una opcion.
                </div>
              </div>
            </div>
            <div class="col-12">
              <label for="fieldRUTFiles" class="form-label"
                >RUT<span class="text-danger">*</span>
              </label>
              <app-upload-files
                id="fieldRUTFiles"
                name="fieldRUTFiles"
                [requiredFeedback]="
                  'Este campo es (*) obligatorio, cargue almenos 1 archivo.'
                "
                (onFilesChange)="setRutFiles($event)"
              ></app-upload-files>
            </div>
            <div class="col-12">
              <label for="fieldCedulaFiles" class="form-label"
                >{{
                  tipoPersona === "Natural"
                    ? "Cedula"
                    : "Cedula del representante legal"
                }}<span class="text-danger">*</span></label
              >
              <app-upload-files
                id="fieldCedulaFiles"
                name="fieldCedulaFiles"
                [requiredFeedback]="
                  'Este campo es (*) obligatorio, cargue almenos 1 archivo.'
                "
                (onFilesChange)="setCedulaFiles($event)"
              ></app-upload-files>
            </div>
            <div class="col-12">
              <label for="fieldCertificacionBancariaFiles" class="form-label"
                >Certificacion bancaria<span class="text-danger">*</span></label
              >
              <app-upload-files
                id="fieldCertificacionBancariaFiles"
                name="fieldCertificacionBancariaFiles"
                [requiredFeedback]="
                  'Este campo es (*) obligatorio, cargue almenos 1 archivo.'
                "
                (onFilesChange)="setCertificacionBancariaFiles($event)"
              ></app-upload-files>
            </div>
            <div class="col-12">
              <div class="form-floating">
                <input
                  [(ngModel)]="informacionAdicional"
                  type="text"
                  class="form-control"
                  name="inputInformacionAdicional"
                  id="inputInformacionAdicional"
                  placeholder="\0"
                  maxlength="255"
                />
                <label for="inputInformacionAdicional"
                  >Informacion adicional</label
                >
              </div>
            </div>
            <div class="col-12">
              <div class="card">
                <div class="card-body">
                  <div class="row g-3">
                    <div class="col-12">
                      <h5 class="card-title text-center">
                        Politica de manejo de datos
                      </h5>
                    </div>
                    <div class="col-12">
                      <p class="card-text"></p>
                    </div>
                    <div class="col-12">
                      <div class="form-check">
                        <input
                          [(ngModel)]="manejoDatos"
                          class="form-check-input"
                          type="checkbox"
                          name="checkManejoDatos"
                          id="checkManejoDatos"
                          [ngClass]="{
                            'is-valid': manejoDatos,
                            'is-invalid': !manejoDatos
                          }"
                        />
                        <label class="form-check-label" for="checkManejoDatos">
                          Aceptar manejo de datos
                        </label>
                        <div class="invalid-feedback">
                          Debes aceptar el manejo de datos para poder enviar el
                          formulario.
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="formIndex > 0" class="d-grid gap-2 col-6 mx-auto mb-2">
      <button
        href="#firstElement"
        (click)="btnPreviousClick()"
        class="btn btn-primary"
      >
        Anterior
      </button>
    </div>
    <div
      *ngIf="formIndex !== 2"
      [ngClass]="{ 'col-12': formIndex === 0 }"
      class="d-grid gap-2 col-6 mx-auto mb-2"
    >
      <button
        href="#firstElement"
        [disabled]="!isValid()"
        (click)="btnNextClick()"
        class="btn btn-primary"
      >
        Siguiente
      </button>
    </div>
    <div *ngIf="formIndex === 2" class="d-grid gap-2 col-6 mx-auto mb-2">
      <button
        href="#firstElement"
        [disabled]="!isValid()"
        (click)="btnSubmitClick()"
        class="btn btn-primary"
      >
        Enviar
      </button>
    </div>
  </div>
