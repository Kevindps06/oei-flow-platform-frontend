{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Utils } from 'src/app/classes/utils';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\n\nfunction UploadFilesComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.requiredFeedback, \"\\n\");\n  }\n}\n\nfunction UploadFilesComponent_div_2_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵelement(1, \"img\", 14);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const File_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", File_r3.Uploaded ? \"../../../../assets/delete.png\" : \"../../../../assets/loading.svg\", i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction UploadFilesComponent_div_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtemplate(1, UploadFilesComponent_div_2_div_1_div_1_Template, 2, 1, \"div\", 7);\n    i0.ɵɵelementStart(2, \"div\", 8);\n    i0.ɵɵelementStart(3, \"h5\", 9);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 10);\n    i0.ɵɵelementStart(6, \"a\", 11);\n    i0.ɵɵelementStart(7, \"img\", 12);\n    i0.ɵɵlistener(\"click\", function UploadFilesComponent_div_2_div_1_Template_img_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const File_r3 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.whenRemoveFiles(File_r3.Index);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const File_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", false);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", File_r3.Index, \". \", File_r3.Name, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"src\", File_r3.Uploaded ? \"../../../../assets/delete.png\" : \"../../../../assets/loading.svg\", i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction UploadFilesComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtemplate(1, UploadFilesComponent_div_2_div_1_Template, 8, 4, \"div\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.Files);\n  }\n}\n\nconst _c0 = function (a0, a1) {\n  return {\n    \"is-valid\": a0,\n    \"is-invalid\": a1\n  };\n};\n\nexport let UploadFilesComponent = /*#__PURE__*/(() => {\n  class UploadFilesComponent {\n    constructor() {\n      this.requiredFeedback = '';\n      this.Files = [];\n      this.onFilesChange = new EventEmitter();\n    }\n\n    ngOnInit() {}\n\n    whenUploadFiles(event) {\n      let currentFilesLength = this.Files.length;\n\n      for (let i = 0; event.target.files.length > i; i++) {\n        this.Files.push({\n          Index: currentFilesLength + i,\n          Name: event.target.files[i].name.replace(/[^a-zA-Z0-9\\.]/g, ''),\n          Size: event.target.files[i].size,\n          Type: event.target.files[i].type,\n          Uploaded: false\n        });\n        Utils.getBase64(event.target.files[i]).then(result => {\n          this.Files[currentFilesLength + i].Bytes = result;\n          this.Files[currentFilesLength + i].Uploaded = true;\n        });\n      }\n\n      event.target.value = null;\n      this.onFilesChange.emit(this.Files);\n    }\n\n    whenRemoveFiles(index) {\n      this.Files.splice(index, 1);\n\n      for (let i = 0; this.Files.length > i; i++) {\n        this.Files[i].Index = i;\n      }\n\n      this.onFilesChange.emit(this.Files);\n    }\n\n    validateFiles(fileItems) {\n      return Utils.validateFiles(fileItems);\n    }\n\n  }\n\n  UploadFilesComponent.ɵfac = function UploadFilesComponent_Factory(t) {\n    return new (t || UploadFilesComponent)();\n  };\n\n  UploadFilesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UploadFilesComponent,\n    selectors: [[\"app-upload-files\"]],\n    inputs: {\n      requiredFeedback: \"requiredFeedback\"\n    },\n    outputs: {\n      onFilesChange: \"onFilesChange\"\n    },\n    decls: 3,\n    vars: 6,\n    consts: [[\"accept\", \"text/csv, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document, image/jpeg, image/png, application/pdf, application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation, text/plain, application/vnd.visio, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/xml, text/xml\", \"type\", \"file\", \"id\", \"Files\", \"name\", \"Files\", \"multiple\", \"\", 1, \"form-control\", 3, \"ngClass\", \"change\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"class\", \"container\", 4, \"ngIf\"], [1, \"invalid-feedback\"], [1, \"container\"], [\"class\", \"\\n      row\\n      justify-content-center\\n      align-items-center\\n      mt-3\\n      border-start border-top border-primary border-1\\n    \", 4, \"ngFor\", \"ngForOf\"], [1, \"row\", \"justify-content-center\", \"align-items-center\", \"mt-3\", \"border-start\", \"border-top\", \"border-primary\", \"border-1\"], [\"class\", \"col-1\", 4, \"ngIf\"], [1, \"col-11\"], [1, \"mb-0\"], [1, \"col-1\", \"gx-0\"], [\"href\", \"javascript:;\"], [\"width\", \"50px\", \"height\", \"50px\", 1, \"img-fluid\", 3, \"src\", \"click\"], [1, \"col-1\"], [\"width\", \"50px\", \"height\", \"50px\", 1, \"img-fluid\", 3, \"src\"]],\n    template: function UploadFilesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"input\", 0);\n        i0.ɵɵlistener(\"change\", function UploadFilesComponent_Template_input_change_0_listener($event) {\n          return ctx.whenUploadFiles($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(1, UploadFilesComponent_div_1_Template, 2, 1, \"div\", 1);\n        i0.ɵɵtemplate(2, UploadFilesComponent_div_2_Template, 2, 1, \"div\", 2);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(3, _c0, ctx.requiredFeedback && ctx.validateFiles(ctx.Files), ctx.requiredFeedback && !ctx.validateFiles(ctx.Files)));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.requiredFeedback);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.Files.length > 0);\n      }\n    },\n    directives: [i1.NgClass, i1.NgIf, i1.NgForOf],\n    styles: [\"\"]\n  });\n  return UploadFilesComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}